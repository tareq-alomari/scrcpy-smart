# وثيقة متطلبات النظام (SRS)
# Reverse Scrcpy - عرض شاشة اللابتوب على الجوال

**الإصدار:** 1.0  
**التاريخ:** 2026-02-14  
**المؤلف:** Tareq Alomari

---

## 1. المقدمة

### 1.1 الغرض
تطوير أداة تسمح بعرض شاشة اللابتوب على جهاز Android والتحكم بها، عكس وظيفة scrcpy التقليدية.

### 1.2 النطاق
- **اسم المشروع:** Reverse Scrcpy (rscrcpy)
- **الهدف:** نقل شاشة الكمبيوتر إلى الجوال مع إمكانية التحكم
- **المستخدمون المستهدفون:** المطورون، المقدمون، العاملون عن بعد

### 1.3 التعريفات والاختصارات
- **SRS:** Software Requirements Specification
- **ADB:** Android Debug Bridge
- **VNC:** Virtual Network Computing
- **RDP:** Remote Desktop Protocol
- **WebRTC:** Web Real-Time Communication

---

## 2. الوصف العام

### 2.1 منظور المنتج
أداة مستقلة تعمل كجسر بين اللابتوب وجهاز Android، تستخدم بروتوكولات البث المباشر لنقل الشاشة.

### 2.2 وظائف المنتج
- بث شاشة اللابتوب إلى الجوال
- التحكم باللابتوب من الجوال (اختياري)
- دعم الاتصال عبر WiFi/USB
- جودة فيديو قابلة للتعديل
- صوت اختياري

### 2.3 خصائص المستخدمين
- مطورون يحتاجون لمراقبة الكود أثناء التنقل
- مقدمو العروض التقديمية
- مستخدمون يريدون شاشة ثانوية محمولة

### 2.4 القيود
- يتطلب Android 7.0 أو أحدث
- يحتاج اتصال WiFi مستقر (5GHz مفضل)
- استهلاك بطارية مرتفع على الجوال

---

## 3. المتطلبات الوظيفية

### 3.1 بث الشاشة

#### FR-1.1: التقاط الشاشة
- **الوصف:** التقاط شاشة اللابتوب في الوقت الفعلي
- **الأولوية:** عالية
- **المدخلات:** شاشة النظام
- **المخرجات:** بث فيديو H.264/H.265
- **المعايير:**
  - دقة: 720p - 1080p قابلة للتعديل
  - معدل الإطارات: 30-60 FPS
  - زمن التأخير: < 100ms

#### FR-1.2: ضغط الفيديو
- **الوصف:** ضغط البث لتقليل استهلاك الشبكة
- **الأولوية:** عالية
- **المعايير:**
  - Bitrate: 2-16 Mbps قابل للتعديل
  - Codec: H.264 (أساسي)، H.265 (اختياري)

### 3.2 الاتصال

#### FR-2.1: اتصال WiFi
- **الوصف:** الاتصال اللاسلكي بين الجهازين
- **الأولوية:** عالية
- **المعايير:**
  - اكتشاف تلقائي للأجهزة
  - إعادة اتصال تلقائية
  - تشفير AES-256

#### FR-2.2: اتصال USB (اختياري)
- **الوصف:** الاتصال عبر كابل USB
- **الأولوية:** متوسطة
- **المعايير:**
  - استخدام ADB reverse port forwarding
  - سرعة نقل أعلى

### 3.3 التحكم (اختياري)

#### FR-3.1: التحكم باللمس
- **الوصف:** التحكم بمؤشر اللابتوب من الجوال
- **الأولوية:** منخفضة
- **المعايير:**
  - نقرة واحدة = نقرة ماوس يسار
  - نقرة مطولة = نقرة ماوس يمين
  - التمرير = حركة الماوس

#### FR-3.2: لوحة المفاتيح
- **الوصف:** إدخال نص من لوحة مفاتيح الجوال
- **الأولوية:** منخفضة

### 3.4 واجهة المستخدم

#### FR-4.1: تطبيق Android
- **الوصف:** تطبيق عميل على الجوال
- **الأولوية:** عالية
- **المميزات:**
  - قائمة الأجهزة المتاحة
  - إعدادات الجودة
  - وضع ملء الشاشة
  - تدوير تلقائي

#### FR-4.2: برنامج اللابتوب
- **الوصف:** خادم على اللابتوب
- **الأولوية:** عالية
- **المميزات:**
  - CLI للتشغيل السريع
  - GUI اختياري
  - أيقونة في System Tray

---

## 4. المتطلبات غير الوظيفية

### 4.1 الأداء
- **NFR-1.1:** زمن التأخير < 100ms في شبكة محلية
- **NFR-1.2:** استهلاك CPU < 15% على اللابتوب
- **NFR-1.3:** استهلاك RAM < 200MB

### 4.2 الأمان
- **NFR-2.1:** تشفير البث بين الجهازين
- **NFR-2.2:** مصادقة بكلمة مرور اختيارية
- **NFR-2.3:** قائمة أجهزة موثوقة

### 4.3 قابلية الاستخدام
- **NFR-3.1:** تثبيت بأمر واحد
- **NFR-3.2:** اتصال تلقائي بدون تكوين
- **NFR-3.3:** واجهة بسيطة وسهلة

### 4.4 التوافق
- **NFR-4.1:** Linux (Ubuntu 20.04+)
- **NFR-4.2:** macOS (11.0+)
- **NFR-4.3:** Windows (10/11)
- **NFR-4.4:** Android (7.0+)

### 4.5 الموثوقية
- **NFR-5.1:** إعادة اتصال تلقائية عند انقطاع الشبكة
- **NFR-5.2:** معالجة الأخطاء بشكل سلس
- **NFR-5.3:** سجل أخطاء مفصل

---

## 5. البنية التقنية المقترحة

### 5.1 المكونات

#### 5.1.1 خادم اللابتوب (Server)
```
┌─────────────────────────────┐
│   Screen Capture Module     │
│   (X11/Wayland/Windows API) │
└──────────────┬──────────────┘
               │
┌──────────────▼──────────────┐
│   Video Encoder (FFmpeg)    │
│   H.264/H.265               │
└──────────────┬──────────────┘
               │
┌──────────────▼──────────────┐
│   Streaming Server          │
│   (WebRTC/RTSP)             │
└──────────────┬──────────────┘
               │
┌──────────────▼──────────────┐
│   Network Layer             │
│   (TCP/UDP)                 │
└─────────────────────────────┘
```

#### 5.1.2 عميل Android (Client)
```
┌─────────────────────────────┐
│   Network Receiver          │
└──────────────┬──────────────┘
               │
┌──────────────▼──────────────┐
│   Video Decoder             │
│   (MediaCodec)              │
└──────────────┬──────────────┘
               │
┌──────────────▼──────────────┐
│   Video Renderer            │
│   (SurfaceView)             │
└──────────────┬──────────────┘
               │
┌──────────────▼──────────────┐
│   Touch Input Handler       │
│   (Optional)                │
└─────────────────────────────┘
```

### 5.2 التقنيات المستخدمة

#### خادم اللابتوب:
- **اللغة:** Python/Rust/Go
- **التقاط الشاشة:**
  - Linux: X11 (xlib) / Wayland (wlroots)
  - macOS: AVFoundation
  - Windows: DXGI Desktop Duplication
- **الترميز:** FFmpeg / GStreamer
- **البث:** WebRTC (libwebrtc) أو RTSP

#### تطبيق Android:
- **اللغة:** Kotlin
- **فك الترميز:** MediaCodec API
- **العرض:** SurfaceView / TextureView
- **الشبكة:** OkHttp / WebRTC Android SDK

### 5.3 البروتوكولات

#### الخيار 1: WebRTC (مفضل)
- **المميزات:**
  - زمن تأخير منخفض جداً
  - تشفير مدمج (DTLS-SRTP)
  - NAT traversal
- **العيوب:**
  - تعقيد التطبيق
  - حجم المكتبات كبير

#### الخيار 2: RTSP + RTP
- **المميزات:**
  - بروتوكول قياسي
  - مكتبات ناضجة
- **العيوب:**
  - زمن تأخير أعلى قليلاً
  - يحتاج تشفير إضافي

#### الخيار 3: بروتوكول مخصص
- **المميزات:**
  - تحكم كامل
  - تحسين للحالة المحددة
- **العيوب:**
  - وقت تطوير أطول
  - صيانة أصعب

---

## 6. حالات الاستخدام

### UC-1: الاتصال الأول
```
1. المستخدم يشغل الخادم على اللابتوب
2. المستخدم يفتح التطبيق على الجوال
3. التطبيق يكتشف الخادم تلقائياً
4. المستخدم ينقر "اتصال"
5. تظهر شاشة اللابتوب على الجوال
```

### UC-2: إعادة الاتصال التلقائي
```
1. المستخدم متصل بالفعل
2. ينقطع اتصال WiFi مؤقتاً
3. النظام يحاول إعادة الاتصال تلقائياً
4. عند عودة الاتصال، يستأنف البث
```

### UC-3: تعديل الجودة
```
1. المستخدم متصل
2. يفتح قائمة الإعدادات
3. يختار جودة أقل (720p بدلاً من 1080p)
4. يتم تطبيق التغيير فوراً
```

---

## 7. خطة التطوير

### المرحلة 1: MVP (4-6 أسابيع)
- [ ] التقاط شاشة اللابتوب (Linux فقط)
- [ ] ترميز H.264 أساسي
- [ ] خادم RTSP بسيط
- [ ] تطبيق Android أساسي
- [ ] اتصال WiFi يدوي (إدخال IP)

### المرحلة 2: التحسينات (3-4 أسابيع)
- [ ] اكتشاف تلقائي للأجهزة (mDNS)
- [ ] إعدادات جودة قابلة للتعديل
- [ ] دعم macOS و Windows
- [ ] واجهة مستخدم محسنة
- [ ] إعادة اتصال تلقائية

### المرحلة 3: مميزات متقدمة (4-6 أسابيع)
- [ ] التحكم باللمس
- [ ] نقل الصوت
- [ ] تشفير البث
- [ ] وضع ملء الشاشة محسن
- [ ] حفظ الأجهزة الموثوقة

### المرحلة 4: التحسين والنشر (2-3 أسابيع)
- [ ] تحسين الأداء
- [ ] اختبارات شاملة
- [ ] توثيق كامل
- [ ] نشر على GitHub
- [ ] إنشاء موقع ويب

---

## 8. معايير القبول

### 8.1 معايير النجاح
- ✅ زمن تأخير < 150ms
- ✅ جودة صورة واضحة (720p على الأقل)
- ✅ اتصال مستقر لمدة 30 دقيقة متواصلة
- ✅ استهلاك بطارية معقول (< 20%/ساعة)
- ✅ تثبيت سهل (< 5 دقائق)

### 8.2 اختبارات الأداء
- اختبار على شبكات WiFi مختلفة (2.4GHz, 5GHz)
- اختبار مع أجهزة Android متنوعة
- اختبار استهلاك الموارد
- اختبار الاستقرار (24 ساعة متواصلة)

---

## 9. المخاطر والتحديات

### 9.1 المخاطر التقنية
| المخاطرة | الاحتمالية | التأثير | الحل |
|----------|------------|---------|------|
| زمن تأخير عالي | متوسطة | عالي | استخدام WebRTC، تحسين الترميز |
| استهلاك بطارية | عالية | متوسط | وضع توفير الطاقة، جودة متغيرة |
| مشاكل توافق | متوسطة | متوسط | اختبارات واسعة، fallback options |
| تعقيد التطوير | عالية | عالي | استخدام مكتبات جاهزة، تطوير تدريجي |

### 9.2 التحديات
1. **التقاط الشاشة عبر منصات مختلفة:** كل نظام له API مختلف
2. **تحسين زمن التأخير:** يتطلب ضبط دقيق للترميز والشبكة
3. **استهلاك البطارية:** فك الترميز وعرض الفيديو مكلف
4. **التشفير:** قد يزيد من زمن التأخير

---

## 10. البدائل والمنافسون

### 10.1 الحلول الموجودة
- **VNC:** زمن تأخير عالي، لكن مستقر
- **TeamViewer:** تجاري، يحتاج حساب
- **Chrome Remote Desktop:** يحتاج إنترنت
- **Deskreen:** مشابه للفكرة، لكن يستخدم متصفح

### 10.2 الميزة التنافسية
- ✅ مفتوح المصدر ومجاني
- ✅ زمن تأخير منخفض
- ✅ لا يحتاج إنترنت (شبكة محلية)
- ✅ سهل الاستخدام
- ✅ تكامل مع scrcpy-smart

---

## 11. الخلاصة

مشروع **Reverse Scrcpy** يهدف لسد فجوة في السوق بتوفير أداة مفتوحة المصدر لعرض شاشة اللابتوب على الجوال بزمن تأخير منخفض. المشروع قابل للتنفيذ تقنياً ويستهدف جمهور المطورين والمستخدمين التقنيين.

### الخطوات التالية:
1. ✅ مراجعة وثيقة SRS
2. ⏳ اختيار التقنيات النهائية
3. ⏳ إنشاء POC (Proof of Concept)
4. ⏳ بدء التطوير

---

**الموافقات:**

| الدور | الاسم | التوقيع | التاريخ |
|------|------|---------|---------|
| مطور رئيسي | Tareq Alomari | _______ | 2026-02-14 |
| مراجع تقني | _______ | _______ | _______ |

---

**سجل التغييرات:**

| الإصدار | التاريخ | التغييرات | المؤلف |
|---------|---------|-----------|---------|
| 1.0 | 2026-02-14 | إصدار أولي | Tareq Alomari |
